import{b as y,c as s}from"./chunk-TJ55WERY.js";function K(e){let{message:r,stack:t,cause:o}=e,n={message:r};return o&&(n.cause=i(o)),t&&(n.stack=t),e instanceof EvalError?{type:"EvalError",value:n}:e instanceof RangeError?{type:"RangeError",value:n}:e instanceof ReferenceError?{type:"ReferenceError",value:n}:e instanceof SyntaxError?{type:"SyntaxError",value:n}:e instanceof TypeError?{type:"TypeError",value:n}:e instanceof URIError?{type:"URIError",value:n}:{type:"Error",value:n}}function b(e){let r=y(e.buffer),t=e.byteLength;if(e instanceof Int8Array)return{type:"Int8Array",value:r,byteLength:t};if(e instanceof Uint8Array)return{type:"Uint8Array",value:r,byteLength:t};if(e instanceof Uint8ClampedArray)return{type:"Uint8ClampedArray",value:r,byteLength:t};if(e instanceof Int16Array)return{type:"Int16Array",value:r,byteLength:t};if(e instanceof Uint16Array)return{type:"Uint16Array",value:r,byteLength:t};if(e instanceof Int32Array)return{type:"Int32Array",value:r,byteLength:t};if(e instanceof Uint32Array)return{type:"Uint32Array",value:r,byteLength:t};if(e instanceof Float32Array)return{type:"Float32Array",value:r,byteLength:t};if(e instanceof Float64Array)return{type:"Float64Array",value:r,byteLength:t};if(e instanceof BigInt64Array)return{type:"BigInt64Array",value:r,byteLength:t};if(e instanceof BigUint64Array)return{type:"BigUint64Array",value:r,byteLength:t};throw TypeError("Unexpected typed array type, could not serialize.")}function S(e){let r={};for(let[t,o]of Object.entries(e))r[t]=i(o);return r}function A(e){let r={};for(let[t,o]of Object.entries(e))r[t]=u(o);return r}function l(e){switch(typeof e){case"bigint":return{type:"bigint",value:String(e)};case"boolean":return{type:"boolean",value:e};case"number":return Number.isNaN(e)?{type:"number",value:"NaN"}:e===1/0?{type:"number",value:"Infinity"}:e===-1/0?{type:"number",value:"-Infinity"}:{type:"number",value:e};case"object":if(e instanceof Uint8Array)return{type:"Uint8Array",value:y(e),byteLength:e.byteLength};break;case"string":return{type:"string",value:e}}throw new TypeError("Unable to serialize value.")}function m(e){return e.map(l)}function i(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":return l(e);case"undefined":return{type:"undefined"};case"object":if(Array.isArray(e))return{type:"Array",value:e.map(i)};if(e instanceof DataView)return{type:"DataView",value:y(e.buffer),byteLength:e.byteLength};if(ArrayBuffer.isView(e))return b(e);if(e instanceof ArrayBuffer)return{type:"ArrayBuffer",value:y(e),byteLength:e.byteLength};if(e instanceof Date)return{type:"Date",value:e.toJSON()};if("Deno"in globalThis&&e instanceof Deno.KvU64)return{type:"KvU64",value:String(e)};if(e instanceof Error)return K(e);if(e instanceof Map){let r=[];for(let[t,o]of e.entries())r.push([i(t),i(o)]);return{type:"Map",value:r}}return e===null?{type:"null",value:e}:e instanceof RegExp?{type:"RegExp",value:String(e)}:e instanceof Set?{type:"Set",value:[...e].map(i)}:{type:"object",value:S(e)};default:throw new TypeError("Unexpected value type, unable to serialize.")}}function d({type:e,value:{message:r,stack:t,cause:o}}){let n,a=o?{cause:u(o)}:void 0;switch(e){case"EvalError":n=new EvalError(r,a);break;case"RangeError":n=new RangeError(r,a);break;case"ReferenceError":n=new ReferenceError(r,a);break;case"SyntaxError":n=new SyntaxError(r,a);break;case"TypeError":n=new TypeError(r,a);break;case"URIError":n=new URIError(r,a);break;default:n=new Error(r,a)}return t&&Object.defineProperty(n,"stack",{value:t,writable:!1,enumerable:!1,configurable:!0}),n}function N(e){let r=s(e.value);switch(e.type){case"BigInt64Array":return new BigInt64Array(r.buffer);case"BigUint64Array":return new BigUint64Array(r.buffer);case"Float32Array":return new Float32Array(r.buffer);case"Float64Array":return new Float64Array(r.buffer);case"Int16Array":return new Int16Array(r.buffer);case"Int32Array":return new Int32Array(r.buffer);case"Int8Array":return new Int8Array(r.buffer);case"Uint16Array":return new Uint16Array(r.buffer);case"Uint32Array":return new Uint32Array(r.buffer);case"Uint8Array":return r;case"Uint8ClampedArray":return new Uint8ClampedArray(r.buffer)}}function c(e){switch(e.type){case"Uint8Array":return s(e.value);case"bigint":return BigInt(e.value);case"boolean":case"string":return e.value;case"number":return e.value==="Infinity"?1/0:e.value==="-Infinity"?-1/0:e.value==="NaN"?NaN:e.value;default:throw new TypeError(`Unexpected key part type: "${e.type}".`)}}function x(e){return e.map(c)}function u(e){switch(e.type){case"Array":return e.value.map(u);case"Map":return new Map(e.value.map(([r,t])=>[u(r),u(t)]));case"object":return A(e.value);case"Set":return new Set(e.value.map(u));case"null":return e.value;case"ArrayBuffer":return s(e.value).buffer;case"BigInt64Array":case"BigUint64Array":case"Float32Array":case"Float64Array":case"Int16Array":case"Int32Array":case"Int8Array":case"Uint16Array":case"Uint32Array":case"Uint8Array":case"Uint8ClampedArray":return N(e);case"DataView":return new DataView(s(e.value).buffer);case"Date":return new Date(e.value);case"Error":case"EvalError":case"RangeError":case"ReferenceError":case"SyntaxError":case"TypeError":case"URIError":return d(e);case"KvU64":return new Deno.KvU64(BigInt(e.value));case"RegExp":{let r=e.value.split("/"),t=r.pop(),[,...o]=r;return new RegExp(o.join("/"),t)}case"bigint":case"boolean":case"number":case"string":return c(e);case"undefined":return;default:throw new TypeError(`Unexpected value type: "${e.type}"`)}}function p(e){return e instanceof DataView?e:ArrayBuffer.isView(e)?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(e)}function v(e,r){if(e.byteLength!==r.byteLength)return!1;let t=p(e),o=p(r),n=e.byteLength,a=0,f=-1;for(;++f<n;)a|=t.getUint8(f)^o.getUint8(f);return a===0}var D=63e3;var h=Object.getPrototypeOf(async function*(){}).constructor;function O(e,r){if(ArrayBuffer.isView(e)){if(!ArrayBuffer.isView(r)||!v(e,r))return!1}else if(e!==r)return!1;return!0}function L(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++){let o=e[t],n=r[t];if(!O(o,n))return!1}return!0}export{m as a,i as b,x as c,u as d,D as e,L as f};
