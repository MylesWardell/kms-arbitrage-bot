import{a as m,c as u}from"./chunk-J3XWRTOX.js";import{e as i,g as f}from"./chunk-A24ONYSU.js";var p="remote_index",l="rkv_",I=new TextDecoder;function y(){let o=localStorage.getItem(p),e=JSON.parse(o??"[]"),t=[];for(let n of e){let r=localStorage.getItem(`${l}${n}`);r&&t.push(JSON.parse(r))}return t}function S(o){let e=[],t=0;for(let n of o)t++,localStorage.setItem(`${l}${t}`,JSON.stringify(n)),e.push(t);localStorage.setItem(p,JSON.stringify(e))}var g="kview_watches";function d(){let o=localStorage.getItem(g),e=Object.create(null);if(o)for(let[t,{keys:n,name:r,href:s}]of Object.entries(JSON.parse(o)))try{e[t]={keys:n.map(u),name:r,href:s}}catch{}return e}function h(o){let e=Object.create(null);for(let[t,{keys:n,name:r,href:s}]of Object.entries(o))e[t]={keys:n.map(m),name:r,href:s};localStorage.setItem(g,JSON.stringify(e))}function K(){let o=i(void 0),e=i(void 0),t=i(void 0),n=i(y()),r=i(d()),s=i([]);return f(()=>S(n.value)),f(()=>h(r.value)),{accessToken:o,sessionToken:e,localStores:t,remoteStores:n,watches:r,notifications:s}}var c=K(),a=0;function j(o,e,t,n=10){a++;let r={message:o,type:e,dismissible:t,id:a};setTimeout(()=>{c.notifications.value=c.notifications.value.filter(({id:s})=>s!==a)},n*1e3),c.notifications.value=[...c.notifications.value,r]}export{c as a,j as b};
