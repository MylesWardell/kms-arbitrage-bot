import{a as f,b as g,d as u,f as h,g as n}from"./chunk-6QUXFABH.js";import{a as r,b as p,d as c}from"./chunk-TJ55WERY.js";import{b as m,h as s}from"./chunk-A24ONYSU.js";function k(l,e){let t=new FormData(l),o=t.get("path")??void 0,a=t.get("name")??void 0;return c((!o||typeof o=="string")&&(!a||typeof a=="string")),{path:o,name:a,id:o??e?.id,previousPath:e?.path}}function E({open:l,store:e}){let t=m(null),o=s(void 0);return r(h,{class:"p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5",open:l,children:[r("div",{class:"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600",children:[r("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white",children:e?"Update local store":"Add local store"}),r(u,{onClick:()=>{o.value=void 0,t.current?.reset(),l.value=!1}})]}),r(g,{children:o}),r("form",{method:"dialog",ref:t,onSubmit:a=>{o.value=void 0;let{currentTarget:y}=a,d=k(y,e),b=JSON.stringify(d);fetch(new URL("/api/local",import.meta.url),{body:b,method:"PUT",headers:{"content-type":"application/json"}}).then(i=>{if(i.ok)d.path&&(!e||d.path!==e.path)?globalThis.location.replace(new URL(`/local/${p(d.path)}`,import.meta.url)):globalThis.location.reload();else return o.value="Error adding local store.",i.json().then(v=>console.error(v))}),a.preventDefault()},children:[r("div",{class:"grid gap-4 mb-4 sm:grid-cols-2",children:[(!e||e.id===e.path)&&r("div",{class:"sm:col-span-2",children:[r(n,{for:"path",children:"Path"}),r("input",{type:"text",name:"path",id:"path",value:e?.path,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 md:w-96",placeholder:"Path (on server) to local store",required:!0})]}),r("div",{class:"sm:col-span-2",children:[r(n,{for:"name",children:"Name"}),r("input",{type:"text",name:"name",id:"name",autoComplete:"off",value:e?.name,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 md:w-96",placeholder:"Friendly name (optional)"})]})]}),r("div",{class:"w-full my-2 md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center md:space-x-3 flex-shrink-0",children:r(f,{children:e?"Update local store":"Add local store"})})]})]})}export{E as a};
